/*  Misc. Routines
 * 
 *  From: https://github.com/PokemonAutomation/Arduino-Source
 * 
 */

#ifndef PokemonAutomation_PokemonSwShMisc_H
#define PokemonAutomation_PokemonSwShMisc_H

#ifdef __AVR__
#include "NativePrograms/SwitchFramework/Master.h"
#endif
#include "Common/MessageProtocol.h"
#include "Common/SwitchFramework/SwitchControllerDefs.h"

////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Universal
#if 0

void mash_A         (uint16_t ticks);
void IoA_backout    (uint16_t pokemon_to_menu_delay);

#endif
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Client Side
#ifdef __cplusplus
namespace PokemonAutomation{
    class BotBaseContext;

    void mash_A         (const BotBaseContext& context, uint16_t ticks);
    void IoA_backout    (const BotBaseContext& context, uint16_t pokemon_to_menu_delay);
}
#endif
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
//  Protocols
#if _WIN32
#pragma pack(push, 1)
#define PABB_PACK
#else
#define PABB_PACK   __attribute__((packed))
#endif
////////////////////////////////////////////////////////////////////////////////

#define PABB_MSG_CONTROLLER_STATE                               0x9f
typedef struct{
    seqnum_t seqnum;
    Button button;
    DpadPosition dpad;
    uint8_t left_joystick_x;
    uint8_t left_joystick_y;
    uint8_t right_joystick_x;
    uint8_t right_joystick_y;
    uint8_t ticks;
} PABB_PACK pabb_controller_state;

#define PABB_MSG_COMMAND_MASH_A                                 0xa0
typedef struct{
    seqnum_t seqnum;
    uint16_t ticks;
} PABB_PACK pabb_mashA;

#define PABB_MSG_COMMAND_IOA_BACKOUT                            0xa2
typedef struct{
    seqnum_t seqnum;
    uint16_t pokemon_to_menu_delay;
} PABB_PACK pabb_IoA_backout;

////////////////////////////////////////////////////////////////////////////////
#if _WIN32
#pragma pack(pop)
#endif
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
////////////////////////////////////////////////////////////////////////////////
#endif

